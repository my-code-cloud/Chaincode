# chaincode_repo

收集go语言链码源码并标注漏洞，转译成LLVM IR文件观察漏洞模式，用于漏洞检测的程序设计。

- github文件夹
    从github收集的涉及PDC相关操作的go程序文件。
- testData文件夹
    整理github文件夹下确定是链码的能够转码成LLVM IR的程序。
    转码过程中编译器会对IR进行0-3级优化，针对不同优化等级的漏洞检测逻辑有差别。
    不同优化等级的差别会在后续进行详细介绍。
- taintAnlysis文件夹
    为作者编写的链码程序。包括其他类型暂未支持的go链码漏洞。

## 不同优化下IR的特征

从漏洞检测的角度出发，我们主要关注IR在以下5方面的差异：

### O0

1. 函数对应关系
   源文件中函数变为:
      - void internal函数
      - 函数名为@包名.原函数名
      - 参数列表更加丰富
2. API对应关系
    - getelementptr指令的操作数包含i32 n，n为API序号
    - 从上述结果中load得到的地址即为call地址
    - 返回值变量名称一致
3. 变量对应关系
    - 变量名称有明显的对应关系
4. 调用执行过程
    - 尚不清楚子函数结果如何返回Invoke
5. 检测实现难度
    - 并不困难，更容易找到与原函数的对应关系帮助定位漏洞

### O1

1. 函数对应关系
2. API对应关系
3. 变量对应关系
4. 调用执行过程
5. 检测实现难度

### O2

1. 函数对应关系
2. API对应关系
3. 变量对应关系
4. 调用执行过程
5. 检测实现难度

### O3

1. 函数对应关系
2. API对应关系
3. 变量对应关系
4. 调用执行过程
5. 检测实现难度
